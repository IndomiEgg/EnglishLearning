<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mini Game - English Learning Hub</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/minigame.css" />
  </head>
  <body class="minigame">
    <header>
      <h1>English Mini Game: Tenses Quiz</h1>
      <nav>
        <a href="index.html">Home</a>
        <a href="tenses.html">Tenses</a>
        <a href="grammar.html">Grammar</a>
        <a href="minigame.html">Mini Game</a>
        <a href="about.html">About</a>
      </nav>
    </header>

    <main>
      <section class="quiz-container">
        <h2>Wordle: Guess the 5-letter Word!</h2>
        <div id="wordle-board"></div>
        <input
          type="text"
          id="wordle-input"
          maxlength="5"
          placeholder="Type a 5-letter word"
          autocomplete="off"
        />
        <button id="wordle-submit">Submit</button>
        <p id="wordle-feedback"></p>
        <p id="wordle-score"></p>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 English Learning Hub by Arkan</p>
    </footer>

    <script>
      const wordList = [
        "apple",
        "table",
        "chair",
        "books",
        "plant",
        "water",
        "music",
        "light",
        "bread",
        "house",
      ];
      const answer =
        wordList[Math.floor(Math.random() * wordList.length)].toLowerCase();
      let attempts = 0;
      const maxAttempts = 6;
      const board = document.getElementById("wordle-board");
      const input = document.getElementById("wordle-input");
      const submit = document.getElementById("wordle-submit");
      const feedback = document.getElementById("wordle-feedback");
      const score = document.getElementById("wordle-score");
      let gameOver = false;

      function renderBoard(guesses) {
        board.innerHTML = "";
        guesses.forEach((guess) => {
          const row = document.createElement("div");
          row.className = "wordle-row";
          for (let i = 0; i < 5; i++) {
            const cell = document.createElement("span");
            cell.className = "wordle-cell";
            cell.textContent = guess.letters[i].toUpperCase();
            cell.classList.add(guess.result[i]);
            row.appendChild(cell);
          }
          board.appendChild(row);
        });
      }

      let guesses = [];

      submit.addEventListener("click", () => {
        if (gameOver) return;
        const value = input.value.trim().toLowerCase();
        if (value.length !== 5) {
          feedback.textContent = "Please enter a 5-letter word.";
          return;
        }
        feedback.textContent = "";
        attempts++;

        let result = Array(5).fill("absent");
        let answerArr = answer.split("");
        let guessArr = value.split("");

        for (let i = 0; i < 5; i++) {
          if (guessArr[i] === answerArr[i]) {
            result[i] = "correct";
            answerArr[i] = null;
          }
        }

        for (let i = 0; i < 5; i++) {
          if (result[i] === "correct") continue;
          const idx = answerArr.indexOf(guessArr[i]);
          if (idx !== -1) {
            result[i] = "present";
            answerArr[idx] = null;
          }
        }
        guesses.push({ letters: guessArr, result });
        renderBoard(guesses);
        input.value = "";
        if (value === answer) {
          feedback.textContent = `Congratulations! The word was "${answer.toUpperCase()}".`;
          gameOver = true;
          score.textContent = `Attempts: ${attempts} / ${maxAttempts}`;
          input.disabled = true;
          submit.disabled = true;
          return;
        }
        if (attempts >= maxAttempts) {
          feedback.textContent = `Game Over! The word was "${answer.toUpperCase()}".`;
          gameOver = true;
          input.disabled = true;
          submit.disabled = true;
        }
        score.textContent = `Attempts: ${attempts} / ${maxAttempts}`;
      });

      input.addEventListener("keyup", function (e) {
        if (e.key === "Enter") {
          submit.click();
        }
      });

      renderBoard(guesses);
      score.textContent = `Attempts: ${attempts} / ${maxAttempts}`;
    </script>
  </body>
</html>
